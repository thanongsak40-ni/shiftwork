{"version":3,"sources":["node_modules/dumi/dist/client/pages/Demo/index.js"],"sourcesContent":["import { useDemo, useLiveDemo, useParams } from 'dumi';\nimport { createElement, useEffect } from 'react';\nimport { useRenderer } from \"../../theme-api/useRenderer\";\nimport \"./index.less\";\nvar DemoRenderPage = function DemoRenderPage() {\n  var params = useParams();\n  var id = params.id;\n  var demo = useDemo(id);\n  var _useRenderer = useRenderer({\n      id: id,\n      component: demo.component,\n      renderOpts: demo.renderOpts\n    }),\n    canvasRef = _useRenderer.canvasRef;\n  var _ref = demo || {},\n    component = _ref.component,\n    renderOpts = _ref.renderOpts;\n  var _useLiveDemo = useLiveDemo(id),\n    liveDemoNode = _useLiveDemo.node,\n    setSource = _useLiveDemo.setSource,\n    liveDemoError = _useLiveDemo.error,\n    loading = _useLiveDemo.loading;\n  var finalNode = liveDemoNode || (renderOpts !== null && renderOpts !== void 0 && renderOpts.renderer ? /*#__PURE__*/createElement('div', {\n    ref: canvasRef\n  }) : component && /*#__PURE__*/createElement(component));\n\n  // listen message event for setSource\n  useEffect(function () {\n    var handler = function handler(ev) {\n      if (ev.data.type === 'dumi.liveDemo.setSource') {\n        setSource(ev.data.value);\n      }\n    };\n    window.addEventListener('message', handler);\n    return function () {\n      return window.removeEventListener('message', handler);\n    };\n  }, [setSource]);\n\n  // notify parent window that compile done\n  useEffect(function () {\n    if (!loading && (liveDemoError || liveDemoNode)) {\n      window.postMessage({\n        type: 'dumi.liveDemo.compileDone',\n        value: {\n          err: liveDemoError\n        }\n      });\n    }\n  }, [liveDemoError, liveDemoNode, loading]);\n  return finalNode;\n};\nexport default DemoRenderPage;"],"names":[],"mappings":";;;;;;;4BAoDA;;;eAAA;;;6BApDgD;8BACP;oCACb;;AAE5B,IAAI,iBAAiB,SAAS;IAC5B,IAAI,SAAS,IAAA,eAAS;IACtB,IAAI,KAAK,OAAO,EAAE;IAClB,IAAI,OAAO,IAAA,aAAO,EAAC;IACnB,IAAI,gBAAe,IAAA,wBAAW,EAAC;QAC3B,IAAI;QACJ,WAAW,KAAK,SAAS;QACzB,YAAY,KAAK,UAAU;IAC7B,IACA,YAAY,cAAa,SAAS;IACpC,IAAI,OAAO,QAAQ,CAAC,GAClB,YAAY,KAAK,SAAS,EAC1B,aAAa,KAAK,UAAU;IAC9B,IAAI,eAAe,IAAA,iBAAW,EAAC,KAC7B,eAAe,aAAa,IAAI,EAChC,YAAY,aAAa,SAAS,EAClC,gBAAgB,aAAa,KAAK,EAClC,UAAU,aAAa,OAAO;IAChC,IAAI,YAAY,gBAAiB,CAAA,eAAe,QAAQ,eAAe,KAAK,KAAK,WAAW,QAAQ,GAAG,WAAW,GAAE,IAAA,oBAAa,EAAC,OAAO;QACvI,KAAK;IACP,KAAK,aAAa,WAAW,GAAE,IAAA,oBAAa,EAAC,UAAS;IAEtD,qCAAqC;IACrC,IAAA,gBAAS,EAAC;QACR,IAAI,UAAU,SAAS,QAAQ,EAAE;YAC/B,IAAI,GAAG,IAAI,CAAC,IAAI,KAAK,2BACnB,UAAU,GAAG,IAAI,CAAC,KAAK;QAE3B;QACA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO;YACL,OAAO,OAAO,mBAAmB,CAAC,WAAW;QAC/C;IACF,GAAG;QAAC;KAAU;IAEd,yCAAyC;IACzC,IAAA,gBAAS,EAAC;QACR,IAAI,CAAC,WAAY,CAAA,iBAAiB,YAAW,GAC3C,OAAO,WAAW,CAAC;YACjB,MAAM;YACN,OAAO;gBACL,KAAK;YACP;QACF;IAEJ,GAAG;QAAC;QAAe;QAAc;KAAQ;IACzC,OAAO;AACT;IACA,WAAe"}